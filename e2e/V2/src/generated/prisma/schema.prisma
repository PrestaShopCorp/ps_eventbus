generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = env("SHOP_DATABASE_URL")
}

model ps_configuration {
  id_configuration Int      @id @default(autoincrement()) @db.UnsignedInt
  id_shop_group    Int?     @db.UnsignedInt
  id_shop          Int?     @db.UnsignedInt
  name             String   @db.VarChar(254)
  value            String?  @db.MediumText
  date_add         DateTime @db.DateTime(0)
  date_upd         DateTime @db.DateTime(0)

  @@index([id_shop], map: "id_shop")
  @@index([id_shop_group], map: "id_shop_group")
  @@index([name], map: "name")
}

model ps_eventbus_incremental_sync {
  type       String   @db.VarChar(50)
  action     String   @default("upsert") @db.VarChar(50)
  id_object  String   @db.VarChar(50)
  id_shop    Int      @db.UnsignedInt
  lang_iso   String   @db.VarChar(3)
  created_at DateTime @db.DateTime(0)

  @@id([type, id_object, id_shop, lang_iso])
}

model ps_eventbus_job {
  job_id     String   @db.VarChar(200)
  created_at DateTime @db.DateTime(0)

  @@id([job_id, created_at])
  @@map("ps_eventbus_job")
}

model ps_eventbus_live_sync {
  shop_content   String   @id @db.VarChar(50)
  last_change_at DateTime @db.DateTime(0)
}

model ps_eventbus_type_sync {
  type               String   @db.VarChar(50)
  offset             Int      @default(0) @db.UnsignedInt
  id_shop            Int      @db.UnsignedInt
  lang_iso           String   @db.VarChar(3)
  full_sync_finished Boolean  @default(false)
  last_sync_date     DateTime @db.DateTime(0)

  @@id([type, id_shop, lang_iso])
}
