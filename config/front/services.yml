imports:
  - { resource: api.yml }
  - { resource: ../common/common.yml }
  - { resource: ../common/decorator.yml }
  - { resource: ../common/repository.yml }
  - { resource: ../common/new-repository.yml }

services:
  PrestaShop\Module\PsEventbus\Service\ApiAuthorizationService:
    class: PrestaShop\Module\PsEventbus\Service\ApiAuthorizationService
    public: true
    arguments:
      - '@PrestaShop\Module\PsEventbus\Repository\EventbusSyncRepository'
      - '@PrestaShop\Module\PsEventbus\Api\SyncApiClient'

  PrestaShop\Module\PsEventbus\Service\SynchronizationService:
    class: PrestaShop\Module\PsEventbus\Service\SynchronizationService
    public: true
    arguments:
      - '@PrestaShop\Module\PsEventbus\Repository\EventbusSyncRepository'
      - '@PrestaShop\Module\PsEventbus\Repository\IncrementalSyncRepository'
      - '@PrestaShop\Module\PsEventbus\Repository\LiveSyncRepository'
      - '@PrestaShop\Module\PsEventbus\Repository\LanguageRepository'
      - '@PrestaShop\Module\PsEventbus\Service\ProxyService'
      - '@PrestaShop\Module\PsEventbus\Decorator\PayloadDecorator'

  PrestaShop\Module\PsEventbus\Service\SpecificPriceService:
    class: PrestaShop\Module\PsEventbus\Service\SpecificPriceService
    arguments:
      - '@PrestaShop\Module\PsEventbus\Repository\SpecificPriceRepository'
    public: true

  PrestaShop\Module\PsEventbus\Service\PresenterService:
    class: PrestaShop\Module\PsEventbus\Service\PresenterService
    public: true

  PrestaShop\Module\PsEventbus\Service\FrontApiService:
    class: PrestaShop\Module\PsEventbus\Service\FrontApiService
    public: true
    arguments:
      - '@ps_eventbus'
      - '@PrestaShop\Module\PsEventbus\Handler\ErrorHandler\ErrorHandler'
      - '@PrestaShop\Module\PsEventbus\Service\PsAccountsAdapterService'
      - '@PrestaShop\Module\PsEventbus\Service\ApiAuthorizationService'
      - '@PrestaShop\Module\PsEventbus\Service\SynchronizationService'
      - '@PrestaShop\Module\PsEventbus\Repository\EventbusSyncRepository'

  PrestaShop\Module\PsEventbus\Service\HealthCheckService:
    class: PrestaShop\Module\PsEventbus\Service\HealthCheckService
    public: true
    arguments:
      - '@ps_eventbus'
      - '@PrestaShop\Module\PsEventbus\Service\PsAccountsAdapterService'
      - '@PrestaShop\Module\PsEventbus\Handler\ErrorHandler\ErrorHandlerInterface'
      - '%ps_eventbus.sync_api_url%'
      - '%ps_eventbus.live_sync_api_url%'
      - '%ps_eventbus.proxy_api_url%'

  # SHOP CONTENT SERVICES 
  PrestaShop\Module\PsEventbus\Service\ShopContent\OrdersService:
    class: PrestaShop\Module\PsEventbus\Service\ShopContent\OrdersService
    public: true
    arguments:
      - '@PrestaShop\Module\PsEventbus\Repository\NewRepository\OrderRepository'
      - '@PrestaShop\Module\PsEventbus\Repository\NewRepository\OrderHistoryRepository'
      - '@PrestaShop\Module\PsEventbus\Formatter\ArrayFormatter'
  
  PrestaShop\Module\PsEventbus\Service\ShopContent\OrderCartRulesService:
    class: PrestaShop\Module\PsEventbus\Service\ShopContent\OrderCartRulesService
    public: true
    arguments:
      - '@PrestaShop\Module\PsEventbus\Repository\NewRepository\OrderCartRuleRepository'
  
  PrestaShop\Module\PsEventbus\Service\ShopContent\OrderHistoriesService:
    class: PrestaShop\Module\PsEventbus\Service\ShopContent\OrderHistoriesService
    public: true
    arguments:
      - '@PrestaShop\Module\PsEventbus\Repository\NewRepository\OrderHistoryRepository'
  
  PrestaShop\Module\PsEventbus\Service\ShopContent\OrderDetailsService:
    class: PrestaShop\Module\PsEventbus\Service\ShopContent\OrderDetailsService
    public: true
    arguments:
      - '@PrestaShop\Module\PsEventbus\Repository\NewRepository\OrderDetailRepository'

  PrestaShop\Module\PsEventbus\Service\ShopContent\CarriersService:
    class: PrestaShop\Module\PsEventbus\Service\ShopContent\CarriersService
    public: true
    arguments:
      - '@PrestaShop\Module\PsEventbus\Repository\NewRepository\CarrierRepository'
      - '@PrestaShop\Module\PsEventbus\Repository\ConfigurationRepository'

  PrestaShop\Module\PsEventbus\Service\ShopContent\CarrierDetailsService:
    class: PrestaShop\Module\PsEventbus\Service\ShopContent\CarrierDetailsService
    public: true
    arguments:
      - '@PrestaShop\Module\PsEventbus\Repository\NewRepository\CarrierRepository'

  PrestaShop\Module\PsEventbus\Service\ShopContent\CarrierTaxesService:
    class: PrestaShop\Module\PsEventbus\Service\ShopContent\CarrierTaxesService
    public: true
    arguments:
      - '@PrestaShop\Module\PsEventbus\Repository\NewRepository\CarrierRepository'
  
  PrestaShop\Module\PsEventbus\Service\ShopContent\CartsService:
    class: PrestaShop\Module\PsEventbus\Service\ShopContent\CartsService
    public: true
    arguments:
      - '@PrestaShop\Module\PsEventbus\Repository\NewRepository\CartRepository'

  PrestaShop\Module\PsEventbus\Service\ShopContent\CartProductsService:
    class: PrestaShop\Module\PsEventbus\Service\ShopContent\CartProductsService
    public: true
    arguments:
      - '@PrestaShop\Module\PsEventbus\Repository\NewRepository\CartProductRepository'

  PrestaShop\Module\PsEventbus\Service\ShopContent\CartRulesService:
    class: PrestaShop\Module\PsEventbus\Service\ShopContent\CartRulesService
    public: true
    arguments:
      - '@PrestaShop\Module\PsEventbus\Repository\NewRepository\CartRuleRepository'

  PrestaShop\Module\PsEventbus\Service\ShopContent\ProductsService:
    class: PrestaShop\Module\PsEventbus\Service\ShopContent\ProductsService
    public: true
    arguments:
      - '@PrestaShop\Module\PsEventbus\Repository\NewRepository\ProductRepository' 
      - '@PrestaShop\Module\PsEventbus\Repository\LanguageRepository'
      - '@PrestaShop\Module\PsEventbus\Service\ShopContent\CategoriesService'
      - '@PrestaShop\Module\PsEventbus\Formatter\ArrayFormatter'

  PrestaShop\Module\PsEventbus\Service\ShopContent\ProductBundlesService:
    class: PrestaShop\Module\PsEventbus\Service\ShopContent\ProductBundlesService
    public: true
    arguments:
      - '@PrestaShop\Module\PsEventbus\Repository\NewRepository\ProductBundleRepository'

  PrestaShop\Module\PsEventbus\Service\ShopContent\ProductSuppliersService:
    class: PrestaShop\Module\PsEventbus\Service\ShopContent\ProductSuppliersService
    public: true
    arguments:
      - '@PrestaShop\Module\PsEventbus\Repository\NewRepository\ProductSupplierRepository'

  PrestaShop\Module\PsEventbus\Service\ShopContent\ProductCarriersService:
    class: PrestaShop\Module\PsEventbus\Service\ShopContent\ProductCarriersService
    public: true
    arguments:
      - '@PrestaShop\Module\PsEventbus\Repository\NewRepository\ProductCarrierRepository'

  PrestaShop\Module\PsEventbus\Service\ShopContent\CategoriesService:
    class: PrestaShop\Module\PsEventbus\Service\ShopContent\CategoriesService
    public: true
    arguments:
      - '@PrestaShop\Module\PsEventbus\Repository\NewRepository\CategoryRepository'
  
  PrestaShop\Module\PsEventbus\Service\ShopContent\CustomersService:
    class: PrestaShop\Module\PsEventbus\Service\ShopContent\CustomersService
    public: true
    arguments:
      - '@PrestaShop\Module\PsEventbus\Repository\NewRepository\CustomerRepository'

  PrestaShop\Module\PsEventbus\Service\ShopContent\CurrenciesService:
    class: PrestaShop\Module\PsEventbus\Service\ShopContent\CurrenciesService
    public: true
    arguments:
      - '@PrestaShop\Module\PsEventbus\Repository\NewRepository\CurrencyRepository'

  PrestaShop\Module\PsEventbus\Service\ShopContent\EmployeesService:
    class: PrestaShop\Module\PsEventbus\Service\ShopContent\EmployeesService
    public: true
    arguments:
      - '@PrestaShop\Module\PsEventbus\Repository\NewRepository\EmployeeRepository'

  PrestaShop\Module\PsEventbus\Service\ShopContent\ImagesService:
    class: PrestaShop\Module\PsEventbus\Service\ShopContent\ImagesService
    public: true
    arguments:
      - '@PrestaShop\Module\PsEventbus\Repository\NewRepository\ImageRepository'

  PrestaShop\Module\PsEventbus\Service\ShopContent\ImageTypesService:
    class: PrestaShop\Module\PsEventbus\Service\ShopContent\ImageTypesService
    public: true
    arguments:
      - '@PrestaShop\Module\PsEventbus\Repository\NewRepository\ImageTypeRepository'

  PrestaShop\Module\PsEventbus\Service\ShopContent\ShopDetailsService:
    class: PrestaShop\Module\PsEventbus\Service\ShopContent\ShopDetailsService
    public: true
    arguments:
      - '@=service("prestashop.adapter.legacy.context").getContext()'
      - '@PrestaShop\Module\PsEventbus\Repository\LanguageRepository'
      - '@PrestaShop\Module\PsEventbus\Repository\ConfigurationRepository'
      - '@PrestaShop\Module\PsEventbus\Repository\ShopRepository'
      - '@PrestaShop\Module\PsEventbus\Service\ShopContent\CurrenciesService'

  PrestaShop\Module\PsEventbus\Service\ShopContent\ModulesService:
    class: PrestaShop\Module\PsEventbus\Service\ShopContent\ModulesService
    public: true
    arguments:
      - '@PrestaShop\Module\PsEventbus\Repository\NewRepository\ModuleRepository'
      - '@PrestaShop\Module\PsEventbus\Repository\ShopRepository'

  PrestaShop\Module\PsEventbus\Service\ShopContent\ThemesService:
    class: PrestaShop\Module\PsEventbus\Service\ShopContent\ThemesService
    public: true
    arguments:
      - '@=service("prestashop.adapter.legacy.context").getContext()'
